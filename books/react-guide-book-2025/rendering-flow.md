---
title: "rendering flow"
emoji: "📘"
type: "tech"
topics: ["react", "javascript", "frontend"]
published: false
---

# 画面表示までの一連の流れ

## 一連の流れ
JSX → Babel → JavaScript → 仮想DOMの作成 → 差分検知 → 実際のDOMへの反映（描画）

ReactはHTMLを直接操作するのではなく、一度「JavaScriptのオブジェクト（仮想DOM）」に変換してから、効率的にDOMを操作するという流れで動作します。<br>
この点がReactの大きな特徴であり、パフォーマンスの鍵となります。


## 各ステップの役割
1. JSX: 人間が読みやすいHTMLのような構文です。ブラウザはこれを直接理解できません。
2. Babel: JSXをブラウザが理解できる通常のJavaScriptに変換（トランスパイル）します。
3. JavaScript: 変換されたJavaScriptがブラウザで実行されます。このとき、`React.createElement()`といった関数が呼ばれます。
4. 仮想DOMの作成: `React.createElement()`が実行されると、実際のHTMLではなく、メモリ上にJavaScriptのオブジェクトとして画面の「設計図」（仮想DOM）が作られます。
5. 差分検知: ユーザーの操作などで画面に変更が発生すると、新しい仮想DOMが作られ、前回の仮想DOMと比較されます。これにより、変更された部分だけが正確に特定されます。
6. 実際のDOMへの反映（描画）: 特定された変更点だけが、ブラウザの**実際のHTML（DOM）**に反映されます。これにより、画面の描画が最小限のコストで行われ、パフォーマンスが保たれます


### 補足
仮想DOMの差分検知から実際のDOMへの反映までの処理は誰がしているのか<br>
→ Reactライブラリ自身

1. ユーザー操作後の処理
状態の変更: ユーザーがボタンをクリックするなどして、Reactコンポーネントの状態（state）が更新される
2. 再レンダリングの要求: Reactは、状態が変更されたことを検知し、コンポーネントの再レンダリングを要求する
4. 新しい仮想DOMの作成: Reactは、新しい状態に基づいて、コンポーネントを再実行し、新しい仮想DOMを作り直す
5. 差分検知: Reactの内部にあるアルゴリズムが、新しい仮想DOMと古い仮想DOMを比較し、変更点（差分）を見つけ出す
6. DOMへの反映: 最後に、Reactがこの差分だけをブラウザのDOMに適用する。